"use strict";(globalThis["webpackChunkfs2020map"]=globalThis["webpackChunkfs2020map"]||[]).push([[383],{2383:(a,e,t)=>{t.r(e),t.d(e,{default:()=>B});var l=t(3673),n=t(8880);function o(a,e,t,o,s,i){const p=(0,l.up)("map-component"),r=(0,l.up)("map-select-bushtrip"),m=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(p,{ref:"mapComponent",onSelectPage:e[0]||(e[0]=e=>a.page=e)},null,512),[[n.F8,"map"===a.page]]),(0,l.wy)((0,l.Wm)(r,{onLoad:e[1]||(e[1]=e=>a.$refs.mapComponent.mapLoadBushtrip(e))},null,512),[[n.F8,"bushtrip"===a.page]])])),_:1})}var s=t(2323);const i=(0,l._)("div",{id:"map",class:"window-width"},null,-1),p=(0,l._)("br",null,null,-1);function r(a,e,t,n,o,r){const m=(0,l.up)("q-badge"),g=(0,l.up)("q-page-sticky"),h=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",null,[i,(0,l.Wm)(g,{position:"top-left",offset:[18,18]},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(m,{color:"blue",class:"q-mr-sm"},{default:(0,l.w5)((()=>[(0,l._)("span",null,(0,s.zw)(`GS: ${a.filghtStatus.GS}`),1)])),_:1}),(0,l.Wm)(m,{color:"green",class:"q-mr-sm"},{default:(0,l.w5)((()=>[(0,l._)("span",null,(0,s.zw)(`HDG: ${a.filghtStatus.HDG}`),1)])),_:1}),(0,l.Wm)(m,{color:"red",class:"q-mr-sm"},{default:(0,l.w5)((()=>[(0,l._)("span",null,(0,s.zw)(`${a.filghtStatus.ALT} ft`),1)])),_:1})])])),_:1}),(0,l.Wm)(g,{position:"bottom-right",offset:[10,18]},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{round:"",class:"bg-white text-grey-8",size:"md",dense:"",icon:a.mapConfig.keepCenter?"gps_fixed":"gps_not_fixed",onClick:e[0]||(e[0]=e=>a.mapConfig.keepCenter=!a.mapConfig.keepCenter)},null,8,["icon"]),p,(0,l.Wm)(h,{round:"",class:"bg-white text-grey-8 q-mt-sm",size:"md",dense:"",icon:"public",onClick:e[1]||(e[1]=e=>a.mapChangeType())})])),_:1}),(0,l.Wm)(g,{position:"bottom-left",offset:[12,18]},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{dense:"",class:"bg-white text-grey-8",icon:"settings",onClick:e[2]||(e[2]=e=>a.showBottomSheet())})])),_:1})])}t(5663);var m=t(7444),g=t(5474),h=t(8825),c=t(5175);const u=[],d=[],b=(0,l.aZ)({async mounted(){const a=document.getElementById("map"),e=window.screen.height-56;a.style.height=`${e}px`,await this.mapInit(),this.mapDrawPastPath(),this.getFilghtData(),setInterval((()=>this.getFilghtData()),this.mapLoadFreq)},data(){return{$q:(0,h.Z)(),$t:(0,c.QT)(),google:null,map:null,mapLoadFreq:3e3,mapLastFilghtPath:null,mapFlightPath:[],filghtStatus:{HDG:0,GS:0,ALT:0},mapConfig:{keepCenter:!0,mapType:"roadmap"}}},methods:{async mapInit(){const a=await this.getApiKey();console.log("key => ",a.data);const e=new m.a(a.data);this.google=await e.load(),this.map=new this.google.maps.Map(document.getElementById("map"),{center:{lat:-35.31166666666666,lng:149.20277777777778},zoom:14,callback:"myMap",disableDefaultUI:!0})},mapDrawPastPath(){if(localStorage.getItem("flightPathRecord")){this.mapFlightPath=JSON.parse(localStorage.getItem("flightPathRecord"));let a=null;this.mapFlightPath.forEach((e=>{a&&u.push(new this.google.maps.Polyline({path:[a,e],geodesic:!0,strokeColor:this.__pathColor(e.ALT),strokeOpacity:.8,strokeWeight:3,map:this.map})),this.mapLastFilghtPath=e,a=e}))}},mapDrawPlane(a){if(!a.lat)return!1;const e={plane:"M 1.9565564,41.694305 C 1.7174505,40.497708 1.6419973,38.448747 1.8096508,37.70494 1.8936398,37.332056 2.0796653,36.88191 2.222907,36.70461 2.4497603,36.423844 4.087816,35.47248 14.917931,29.331528 l 12.434577,-7.050718 -0.04295,-7.613412 c -0.03657,-6.4844888 -0.01164,-7.7625804 0.168134,-8.6194061 0.276129,-1.3160905 0.762276,-2.5869575 1.347875,-3.5235502 l 0.472298,-0.7553719 1.083746,-0.6085497 c 1.194146,-0.67053522 1.399524,-0.71738842 2.146113,-0.48960552 1.077005,0.3285939 2.06344,1.41299352 2.797602,3.07543322 0.462378,1.0469993 0.978731,2.7738408 1.047635,3.5036272 0.02421,0.2570284 0.06357,3.78334 0.08732,7.836246 0.02375,4.052905 0.0658,7.409251 0.09345,7.458546 0.02764,0.04929 5.600384,3.561772 12.38386,7.805502 l 12.333598,7.715871 0.537584,0.959688 c 0.626485,1.118378 0.651686,1.311286 0.459287,3.516442 -0.175469,2.011604 -0.608966,2.863924 -1.590344,3.127136 -0.748529,0.200763 -1.293144,0.03637 -10.184829,-3.07436 C 48.007733,41.72562 44.793806,40.60197 43.35084,40.098045 l -2.623567,-0.916227 -1.981212,-0.06614 c -1.089663,-0.03638 -1.985079,-0.05089 -1.989804,-0.03225 -0.0052,0.01863 -0.02396,2.421278 -0.04267,5.339183 -0.0395,6.147742 -0.143635,7.215456 -0.862956,8.845475 l -0.300457,0.680872 2.91906,1.361455 c 2.929379,1.366269 3.714195,1.835385 4.04589,2.41841 0.368292,0.647353 0.594634,2.901439 0.395779,3.941627 -0.0705,0.368571 -0.106308,0.404853 -0.765159,0.773916 L 41.4545,62.83158 39.259237,62.80426 c -6.030106,-0.07507 -16.19508,-0.495041 -16.870991,-0.697033 -0.359409,-0.107405 -0.523792,-0.227482 -0.741884,-0.541926 -0.250591,-0.361297 -0.28386,-0.522402 -0.315075,-1.52589 -0.06327,-2.03378 0.23288,-3.033615 1.077963,-3.639283 0.307525,-0.2204 4.818478,-2.133627 6.017853,-2.552345 0.247872,-0.08654 0.247455,-0.102501 -0.01855,-0.711959 -0.330395,-0.756986 -0.708622,-2.221756 -0.832676,-3.224748 -0.05031,-0.406952 -0.133825,-3.078805 -0.185533,-5.937448 -0.0517,-2.858644 -0.145909,-5.208974 -0.209316,-5.222958 -0.06341,-0.01399 -0.974464,-0.0493 -2.024551,-0.07845 L 23.247235,38.61921 18.831373,39.8906 C 4.9432155,43.88916 4.2929558,44.057819 3.4954426,43.86823 2.7487826,43.690732 2.2007966,42.916622 1.9565564,41.694305 z"},t={path:"M 0,0 "+e.plane,fillColor:"#ff005e",fillOpacity:.9,scale:.4,anchor:new this.google.maps.Point(32,32),rotation:a.rotation},l=new this.google.maps.Marker({position:{lat:a.lat,lng:a.lng},map:this.map,icon:t});setTimeout((()=>{l.setMap(null)}),this.mapLoadFreq-50)},mapDrawPath(a){if(!a.lat)return!1;const e=new this.google.maps.Polyline({path:[this.mapLastFilghtPath,a],geodesic:!0,strokeColor:this.__pathColor(a.ALT),strokeOpacity:.8,strokeWeight:3,map:this.map});this.mapLastFilghtPath=a,u.push(e),this.mapFlightPath.push(a),localStorage.setItem("flightPathRecord",JSON.stringify(this.mapFlightPath))},mapChangeType(){"roadmap"===this.mapConfig.mapType?(this.map.setMapTypeId("hybrid"),this.mapConfig.mapType="hybird"):(this.map.setMapTypeId("roadmap"),this.mapConfig.mapType="roadmap")},mapClearPath(){localStorage.removeItem("flightPathRecord"),this.mapFlightPath=[],u.forEach((a=>{a.setMap(null)})),d.forEach((a=>{a.setMap(null)}))},mapLoadBushtrip(a){this.$emit("selectPage","map");const e=new this.google.maps.InfoWindow;d.forEach((a=>{a.setMap(null)}));let t=null;a.forEach((a=>{const l=new this.google.maps.Marker({position:{lat:a.lat,lng:a.lng},map:this.map,label:{text:a.name,fontWeight:"bold"},title:a.label,icon:{path:this.google.maps.SymbolPath.CIRCLE,scale:4,labelOrigin:new this.google.maps.Point(0,5)}});if(l.addListener("click",(()=>{e.close(),e.setContent(l.getTitle()),e.open(l.getMap(),l)})),d.push(l),t){const e=new this.google.maps.Polyline({path:[t,{lat:a.lat,lng:a.lng}],geodesic:!0,strokeColor:"#ff005e",strokeOpacity:.8,strokeWeight:6,map:this.map});d.push(e)}t={lat:a.lat,lng:a.lng}}))},showBottomSheet(){this.$q.bottomSheet({dark:!0,message:"Map Settings",actions:[{label:"Delete Path",icon:"delete",id:"bs_deletePath"},{label:"Load BustTrip",icon:"file_download",id:"bs_test"}]}).onOk((a=>{switch(console.log(a),a.id){case"bs_deletePath":this.mapClearPath();break;case"bs_test":this.$emit("selectPage","bushtrip");break}}))},async getFilghtData(){g.api.get("/api/navigation").then((a=>{const e={lat:a.data.PLANE_LATITUDE,lng:a.data.PLANE_LONGITUDE,rotation:57.295779513*a.data.PLANE_HEADING_DEGREES_TRUE,HDG:this.__fixHDG(a.data.PLANE_HEADING_DEGREES_TRUE),GS:parseInt(a.data.GROUND_VELOCITY),ALT:parseInt(a.data.PLANE_ALTITUDE)};if(.00040745766734421836===e.lat&&.01397450300629543===e.lng)return!1;this.mapDrawPlane(e),this.mapDrawPath(e),this.filghtStatus=e,this.mapConfig.keepCenter&&this.map.panTo({lat:e.lat,lng:e.lng})}))},async getApiKey(){return await g.api.get("/key").catch((()=>({data:null})))},__fixHDG(a){return parseInt(57.295779513*a).toString().padStart(3,"0")},__pathColor(a){let e="#FFFFF";return a<=5e3&&(e=`rgb(255, ${150+parseInt(100*a/5e3)}, 0)`),a>5e3&&a<=17e3&&(e=`rgb(${255-parseInt(255*(a-5e3)/12e3)}, 255, 0)`),a>17e3&&a<29e3&&(e=`rgb(0, 255, ${parseInt(255*(a-17e3)/12e3)})`),a>=29e3&&a<41e3&&(e=`rgb(0, ${255-parseInt(255*(a-29e3)/12e3)}, 255)`),a>=41e3&&(e="rgb(0, 0, 255)"),e}}});var y=t(4260),P=t(1007),f=t(9721),w=t(4607),I=t(7518),k=t.n(I);const C=(0,y.Z)(b,[["render",r]]),O=C;k()(b,"components",{QPageSticky:P.Z,QBadge:f.Z,QBtn:w.Z});const _={class:"q-pa-md row q-col-gutter-sm"},U={class:"text-h6"},S={class:"text-caption q-mt-sm"},L={class:"text-caption q-mt-sm"},T={class:"text-caption q-mt-sm"};function M(a,e,t,n,o,i){const p=(0,l.up)("q-icon"),r=(0,l.up)("q-card-section"),m=(0,l.up)("q-card");return(0,l.wg)(),(0,l.iD)("div",_,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.bushtrips,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"col-md-6 col-12",key:e.name},[(0,l.Wm)(m,{class:"my-card",flat:"",onClick:t=>a.selectBushtrip(e.idx)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,null,{default:(0,l.w5)((()=>[(0,l._)("div",U,(0,s.zw)(e.name),1),(0,l._)("div",S,[(0,l.Wm)(p,{name:"place",size:"xs"}),(0,l.Uk)(" "+(0,s.zw)(e.location),1)]),(0,l._)("div",L,[(0,l.Wm)(p,{name:"flight_takeoff",size:"xs"}),(0,l.Uk)(" "+(0,s.zw)(e.aircraft),1)]),(0,l._)("div",T,[(0,l.Wm)(p,{name:"moving",size:"xs"}),(0,l.Uk)(" "+(0,s.zw)(e.legs)+" Legs, "+(0,s.zw)(e.distance)+" nm, "+(0,s.zw)(e.times),1)])])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])}const E=JSON.parse('[{"idx":18,"name":"Australia Southeastern","location":"Australia","aircraft":"Cessna 172 Skyhawk (G1000)","legs":"4","distance":"323","times":"02:57"}]'),D=JSON.parse('[{"name":"YSCB","label":"Canberra","type":"A","lat":-35.31166666666666,"lng":149.20277777777778},{"name":"POI1","label":"Mount Ainslie","type":"U","lat":-35.27472222222222,"lng":149.16944444444445},{"name":"POI2","label":"City Hill","type":"U","lat":-35.2925,"lng":149.13666666666668},{"name":"POI3","label":"Lake Burley Griffin","type":"U","lat":-35.29,"lng":149.12},{"name":"POI4","label":"National Museum of Australia","type":"U","lat":-35.29972222222222,"lng":149.12361111111113},{"name":"POI5","label":"Parliament House","type":"U","lat":-35.31361111111111,"lng":149.12972222222223},{"name":"POI6","label":"Royal Australian Mint","type":"U","lat":-35.32027777777778,"lng":149.09944444444446},{"name":"POI7","label":"Canberra Deep Space Communications Complex","type":"U","lat":-35.402499999999996,"lng":148.98805555555555},{"name":"POI8","label":"Tantagara Reservoir","type":"U","lat":-35.75361111111111,"lng":148.66583333333335},{"name":"POI9","label":"Eucumbene River","type":"U","lat":-35.95777777777777,"lng":148.6213888888889},{"name":"POI10","label":"Lake Eucumbene","type":"U","lat":-36.103611111111114,"lng":148.73111111111112},{"name":"YCOM","label":"Cooma-Snowy Mountains","type":"A","lat":-36.30083333333333,"lng":148.97861111111112},{"name":"POI11","label":"Lake Jindabyne","type":"U","lat":-36.39194444444445,"lng":148.65055555555554},{"name":"POI12","label":"Thredbo River","type":"U","lat":-36.42583333333333,"lng":148.4763888888889},{"name":"POI13","label":"Main Range - Snowy Mountains","type":"U","lat":-36.45666666666666,"lng":148.26694444444445},{"name":"POI14","label":"Mount Kosciuszko","type":"U","lat":-36.46,"lng":148.25777777777776},{"name":"POI15","label":"Murray River","type":"U","lat":-36.556666666666665,"lng":148.13444444444445},{"name":"POI16","label":"Lake Dartmouth","type":"U","lat":-36.64138888888889,"lng":147.61777777777777},{"name":"POI17","label":"Tawonga","type":"U","lat":-36.70583333333333,"lng":147.15777777777777},{"name":"YMBT","label":"Mount Beauty Airport","type":"A","lat":-36.733333333333334,"lng":147.16666666666666},{"name":"POI18","label":"Mount Buffalo National Park","type":"U","lat":-36.78638888888889,"lng":146.81805555555556},{"name":"POI19","label":"Rose River","type":"U","lat":-36.84027777777778,"lng":146.57833333333332},{"name":"POI20","label":"Powers Lookout Scenic Reserve","type":"U","lat":-36.84388888888889,"lng":146.3775},{"name":"POI21","label":"Toombullup","type":"U","lat":-36.91777777777777,"lng":146.27305555555557},{"name":"POI22","label":"Mansfield","type":"U","lat":-37.05416666666667,"lng":146.09444444444446},{"name":"YMFD","label":"Mansfield Airport","type":"A","lat":-37.06666666666667,"lng":146.11666666666667},{"name":"POI23","label":"Lake Eildon","type":"U","lat":-37.18333333333333,"lng":145.88361111111112},{"name":"POI24","label":"Cathedral Range State Park","type":"U","lat":-37.37694444444445,"lng":145.76},{"name":"POI25","label":"Murrindindi Scenic Reserve","type":"U","lat":-37.42472222222222,"lng":145.5686111111111},{"name":"POI26","label":"Toolangi Forest","type":"U","lat":-37.516666666666666,"lng":145.5313888888889},{"name":"POI27","label":"Kinglake","type":"U","lat":-37.52861111111111,"lng":145.3552777777778},{"name":"POI28","label":"Van Yean Reservoir","type":"U","lat":-37.55888888888889,"lng":145.1602777777778},{"name":"POI29","label":"Yarra River","type":"U","lat":-37.77361111111111,"lng":145.0861111111111},{"name":"POI30","label":"Melbourne Cricket Grund","type":"U","lat":-37.82222222222222,"lng":144.9836111111111},{"name":"POI31","label":"Arts Center Melbourne","type":"U","lat":-37.822500000000005,"lng":144.9688888888889},{"name":"POI32","label":"Eureka Tower","type":"U","lat":-37.82472222222223,"lng":144.97416666666666},{"name":"POI33","label":"Australia 108","type":"U","lat":-37.8275,"lng":144.97333333333333},{"name":"POI34","label":"Port Melbourne","type":"U","lat":-37.83833333333334,"lng":144.9425},{"name":"YMEN","label":"Essendon","type":"A","lat":-37.73555555555556,"lng":144.90333333333334}]'),A=(0,l.aZ)({data(){return{bushtrips:E}},methods:{selectBushtrip(a){console.log(a),18===a&&this.$emit("load",D)}}});var v=t(151),F=t(5589),R=t(4554);const q=(0,y.Z)(A,[["render",M]]),W=q;k()(A,"components",{QCard:v.Z,QCardSection:F.Z,QIcon:R.Z});const x=(0,l.aZ)({components:{"map-component":O,"map-select-bushtrip":W},data(){return{page:"map"}}});var G=t(4379);const z=(0,y.Z)(x,[["render",o]]),B=z;k()(x,"components",{QPage:G.Z})}}]);